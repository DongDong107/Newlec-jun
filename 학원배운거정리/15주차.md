# 15주차 정리 (2023-03-06 ~ 03-10)

## 03.06

1. 오늘도 이전까지 내용들 요약정리 시작.

2. 추후에 참고해서 노션에 하나씩 차곡차곡 정리하고 외우자.

3. 트랜잭션을 처리하는 방법 => 스프링에서는 AOP라는 방법론을 이용.

4. Mybatis

- DAO를 구현하지 않게 만들어주고, SQL문만 작정하도록 도와주는 프레임워크

- 라이브러리 준비
- 구현할 Dao 인터페이스 준비
- Dao 인터페이스에 SQL 매핑하기

5. 인터페이스에 SQL 매핑방법

(1) 어노테이션

- id가 문자열이면? '' 이 포함되어야 함 #을 사용하면 '' 이 맞게 들어감.
- $ 는? 본래 값 그대로

- 어노테이션 매핑보다는 XML 매핑을 선호하게 된다.
- 쿼리문이 길어지고,

- Dao, Repository 파일에서는 쿼리매핑 ㄴㄴ. 약속들만.

(2) XML

- mapper 관련 xml 파일이 최근까지도 package 안에 있었다.
- 스프링부트가 버전이 올라가면서 리소스 폴더를 만들어주면서 여기에 두었는데 나중에 없다면 entity 패키지에 있을 가능성이 농후.

- 쓰는 방법

```XML
<!--> namespace에 Dao 파일의 위치<-->
<mapper namespace="kr.co.rland.web.repository.MenuRepository">
	<!-- 내려쓰기 쌉가능 -->
  <select id="findAll">
		select *
		from menu
		where id=#{id}
	</select>
  <!-- id에 약속한 구현할 메소드 이름 -->
	<select id="findById"></select>
	<insert id="insert"></insert>
	<update id="update"></update>
	<delete id="delete"></delete>
</mapper>
```

```XML
<!-- resultType 에 담을 그릇 개체 파일을 지정해주어야 함. -->
<select id="findAll" resultType="kr.co.rland.web.entity.Menu">
		select *
		from menu
	</select>
```

- 멥퍼 파일 경로 지정

```yml
mybatis:
  mapper-locations:
    # 전체 클래스패스 경로에서 / 앞에 모든 이름이 붙든 끝에 Mapper 가 달린 모든 파일
    - classpath*:mapper/*Mapper.xml
```

6. 우리가 현재 MenuRepository 파일에 mybatis 어노테이션을 해놓고 나면 스프링이 뻗음.

- JdbcMenu레포 파일에서 구현한 것도 어노테이션을 통해 IOC 컨테이너에 같이 중복으로 올라가 있기 떄문에.

7. application.properties , profile 관련 복습 필수

8. yml 공백 하나하나 다 약속임. ㅈ..지울예쩡..?

- plus1. 리플렉션, 어노테이션
